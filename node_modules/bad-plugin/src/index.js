export default function ({types: t }) {
  return {
    visitor: {
      JSXAttribute(path, state) {
        if (path.node.name.name === "wrapIf") {
          const jSXElement = path.parentPath.parent;
          const callExpression = t.callExpression(t.identifier("show"), []);
          const conditionalExpression = t.conditionalExpression(callExpression, jSXElement, t.nullLiteral());
          const jSXExpressionContainer = t.jSXExpressionContainer(conditionalExpression);

          path.parentPath.parentPath.replaceWith(conditionalExpression); // Errors with child

          path.remove();
        }
      }
    }
  };
}